<app-sidebar></app-sidebar>
<simple-notifications [options]="options"></simple-notifications>
<div class="content-container">

  <div class="container-fluid">

    <!-- Main component for a primary marketing message or call to action -->
    <!-- <div class="jumbotron"> -->
      <h1>{{page_title}}</h1>
      <br>
      <!-- Crear nuevo producto -->
      <div>
        <!-- Button trigger modal -->
        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#crearProducto">
          Registrar nuevo producto al inventario
        </button>

        <!-- Modal -->
        <div class="modal fade" id="crearProducto" tabindex="-1" role="dialog" aria-labelledby="crearProductoLabel"
          aria-hidden="true">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="crearProductoLabel">Registrar un nuevo producto</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <!-- empieza el cuerpo -->
              <div class="modal-body">
                <form #registerForm="ngForm">
                  <div class="form-group">
                    <label for="article_id">Articulo</label>
                    <select name="article_id" #article_id="ngModel" [(ngModel)]="nuevoProducto.article_id" 
                      class="form-control">
                      <option *ngFor="let articulo of articulos" value="{{articulo.id}}">{{articulo.name}}</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label for="entrada">Cantidad del producto</label>
                    <input type="number" pattern="^[0-9]+" min="1" class="form-control" name="entrada" placeholder="Cantidad" #entrada="ngModel"
                      [(ngModel)]="nuevoProducto.entrada" required>
                    <small *ngIf="!entrada.valid && entrada.touched" class="invalid-feedback d-block">Ingrese codigo</small>
                  </div>
                  <div class="form-group">
                    <label for="ent_val_uni">Precio del producto</label>
                    <input type="number" pattern="^[0-9]+" min="1" class="form-control" name="ent_val_uni" placeholder="Precio" #ent_val_uni="ngModel"
                      [(ngModel)]="nuevoProducto.ent_val_uni" required>
                    <small *ngIf="!ent_val_uni.valid && ent_val_uni.touched" class="invalid-feedback d-block">Ingrese codigo</small>
                  </div>                  
                </form>
              </div>
              <!-- termina el cuerpo -->
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
                <button (click)="registrarProducto(registerForm)" type="button" class="btn btn-primary"
                  [disabled]="registerForm.invalid">Guardar</button>
              </div>
            </div>
          </div>
        </div>
      </div>
      <br>
      <!-- tabla inventario -->
      <table datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger" class="table table-striped table-bordered row-border hover">
        <thead>
          <tr>
            <th>#</th>
            <th>Codigo</th>
            <th>Articulo</th>
            <th>Devuelto</th>
            <th>Alquiler</th>
            <th>Disponible</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let producto of inventario; let i = index">
            <td>{{ i+1 }}</td>
            <td>{{ producto.code }}</td>
            <td>{{ producto.name }}</td>
            <td>{{ producto.devuelto }}</td>
            <td>{{ producto.alquiler }}</td>
            <td>{{ producto.totalDisponible }}</td>
            <!-- <td> -->
              <!-- Trigger the modal with a button -->
              <!-- <button type="button" class="btn btn-info" data-toggle="modal"
                [attr.data-target]="'#myModal'+producto.id">Eliminar</button> -->

              <!-- Modal -->
              <!-- <div id="{{'myModal'+producto.id}}" class="modal fade" role="dialog">
                <div class="modal-dialog"> -->

                  <!-- Modal content-->
                  <!-- <div class="modal-content">
                    <div class="modal-header">
                      <button type="button" class="close" data-dismiss="modal">&times;</button>
                      <h4 class="modal-title">¿Estas seguro que quieres borrar?</h4>
                    </div>
                    <div class="modal-body">
                      <p>Vas a borrar definitivamente el producto {{producto.articulo}} con el codigo {{producto.code}}</p>
                    </div>
                    <div class="modal-footer">
                      <div (click)="deleteProducto(producto.id)" class="btn btn-danger" data-dismiss="modal">Borrar</div>
                      <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    </div>
                  </div>

                </div>
              </div>
            </td> -->
          </tr>
        </tbody>
      </table>
      <!-- <table datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger" class="table table-striped table-bordered row-border hover">
        <thead>
          <tr>
            <th>#</th>
            <th>Codigo</th>
            <th>Articulo</th>
            <th>Fecha</th>
            <th>Descripción</th>
            <th>Entrada</th>
            <th>En. v/u</th>
            <th>En. v/t</th>
            <th>Salida</th>
            <th>Sa. v/u</th>
            <th>Sa v/t</th>
            <th>Existe</th>
            <th>Ex. v/u</th>
            <th>Ex. v/t</th>
            <th>Eliminar</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let producto of inventario; let i = index">
            <td>{{ i+1 }}</td>
            <td>{{ producto.code }}</td>
            <td>{{ producto.name }}</td>
            <td>{{ producto.date }}</td>
            <td>{{ producto.description }}</td>
            <td>{{ producto.entrada }}</td>
            <td>{{ producto.ent_val_uni }}</td>
            <td>{{ producto.ent_val_tot }}</td>
            <td>{{ producto.salida }}</td>
            <td>{{ producto.sal_val_uni }}</td>
            <td>{{ producto.sal_val_tot }}</td>
            <td>{{ producto.existe }}</td>
            <td>{{ producto.exi_val_uni }}</td>
            <td>{{ producto.exi_val_tot }}</td> -->
            <!-- <td> -->
              <!-- Trigger the modal with a button -->
              <!-- <button type="button" class="btn btn-info" data-toggle="modal"
                [attr.data-target]="'#myModal'+producto.id">Eliminar</button> -->

              <!-- Modal -->
              <!-- <div id="{{'myModal'+producto.id}}" class="modal fade" role="dialog">
                <div class="modal-dialog"> -->

                  <!-- Modal content-->
                  <!-- <div class="modal-content">
                    <div class="modal-header">
                      <button type="button" class="close" data-dismiss="modal">&times;</button>
                      <h4 class="modal-title">¿Estas seguro que quieres borrar?</h4>
                    </div>
                    <div class="modal-body">
                      <p>Vas a borrar definitivamente el producto {{producto.articulo}} con el codigo {{producto.code}}</p>
                    </div>
                    <div class="modal-footer">
                      <div (click)="deleteProducto(producto.id)" class="btn btn-danger" data-dismiss="modal">Borrar</div>
                      <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    </div>
                  </div>

                </div>
              </div>
            </td> -->
          <!-- </tr>
        </tbody>
      </table> -->
      <br>

    <!-- </div> -->

  </div>
</div>
